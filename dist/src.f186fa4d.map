{"version":3,"sources":["../src/screencapture.js","../src/pick.js","../src/ipcMainHandler.js","../src/index.js","src/index.js"],"names":["global","html2canvas","canvas","obj","onrendered","getStream","Promise","resolve","reject","getSources","types","error","sources","display","getDisplay","sourceId","displayIndex","screen","getAllDisplays","item","id","navigator","webkitGetUserMedia","audio","video","mandatory","chromeMediaSource","chromeMediaSourceId","maxWidth","size","width","maxHeight","height","minWidth","minHeight","getVideo","document","createElement","autoplay","src","URL","createObjectURL","stream","addEventListener","getCanvas","drawFrame","ctx","x","y","availTop","drawImage","getFrameImage","toDataURL","console","log","getLoop","requestId","callFn","requestAnimationFrame","fn","cancelAnimationFrame","startRecording","recorder","type","getContext","stopLoop","stop","stopRecording","getDataURL","url","pause","pauseRecording","resume","resumeRecording","takeScreenshot","bounds","then","captureVideo","require","remote","ipcMain","BrowserWindow","path","ipc","ipcRenderer","desktopCapturer","win","exports","pick","replace","transparent","frame","toolbar","setSimpleFullScreen","show","loadURL","join","process","cwd","webContents","on","send","result","event","message","pixels","JSON","parse","data","rgbBox","getElementById","rgbValues","innerHTML","style","backgroundColor","ipcMainHandler","stringify","Demo","state","img","attach","bind","r","flex","margin","border","padding","querySelector"],"mappings":"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","file":"src.f186fa4d.map","sourcesContent":["import RecordRTC from \"recordrtc\";\nimport electron, { desktopCapturer } from \"electron\";\nimport find from \"array-find\";\nimport findIndex from \"lodash.findindex\";\n\n/* This is NEEDED because RecordRTC is badly written */\nglobal.html2canvas = (canvas, obj) => {\n  obj.onrendered(canvas);\n};\n\nconst getStream = sourceId => {\n  return new Promise((resolve, reject) => {\n    desktopCapturer.getSources({ types: [\"screen\"] }, (error, sources) => {\n      if (error) {\n        reject(error);\n        return;\n      }\n\n      const display = getDisplay(sourceId);\n      const displayIndex = findIndex(\n        electron.screen.getAllDisplays(),\n        item => item.id == sourceId\n      );\n\n      navigator.webkitGetUserMedia(\n        {\n          audio: false,\n          video: {\n            mandatory: {\n              chromeMediaSource: \"desktop\",\n              chromeMediaSourceId: sources[displayIndex].id,\n              maxWidth: display.size.width,\n              maxHeight: display.size.height,\n              minWidth: display.size.width,\n              minHeight: display.size.height\n            }\n          }\n        },\n        resolve,\n        reject\n      );\n    });\n  });\n};\n\nconst getVideo = stream => {\n  const video = document.createElement(\"video\");\n  video.autoplay = true;\n  video.src = URL.createObjectURL(stream);\n  return new Promise(resolve => {\n    video.addEventListener(\"playing\", () => {\n      resolve(video);\n    });\n  });\n};\n\nconst getCanvas = (width, height) => {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n};\n\nconst drawFrame = ({\n  ctx,\n  video,\n  x,\n  y,\n  width,\n  height,\n  availTop = screen.availTop\n}) => {\n  ctx.drawImage(video, x, y, width, height, 0, -availTop, width, height);\n};\n\nconst getFrameImage = canvas => {\n  return canvas.toDataURL();\n};\n\nconst getDisplay = id => {\n  const x = find(electron.screen.getAllDisplays(), item => {\n    console.log(item.id, id);\n    return item.id == id;\n  });\n\n  return x;\n};\n\nconst getLoop = fn => {\n  let requestId;\n  const callFn = () => {\n    requestId = requestAnimationFrame(callFn);\n    fn();\n  };\n  callFn();\n  return () => {\n    cancelAnimationFrame(requestId);\n  };\n};\n\nconst startRecording = ({ canvas, video, x, y, width, height, availTop }) => {\n  const recorder = RecordRTC(canvas, { type: \"canvas\" });\n  const ctx = canvas.getContext(\"2d\");\n  const stopLoop = getLoop(() =>\n    drawFrame({ ctx, video, x, y, width, height, availTop })\n  );\n\n  recorder.startRecording();\n\n  return {\n    stop() {\n      return new Promise(resolve => {\n        stopLoop();\n        recorder.stopRecording(() => {\n          recorder.getDataURL(url => resolve({ url, width, height }));\n        });\n      });\n    },\n    pause() {\n      recorder.pauseRecording();\n    },\n    resume() {\n      recorder.resumeRecording();\n    }\n  };\n};\n\nexport const takeScreenshot = ({ x, y, width, height, sourceId }) => {\n  //const availTop = screen.availTop - getDisplay(sourceId).bounds.y;\n\n  const display = getDisplay(sourceId);\n\n  if (typeof x == \"undefined\") x = display.bounds.x;\n  if (typeof y == \"undefined\") y = display.bounds.y;\n  if (typeof width == \"undefined\") width = display.bounds.width;\n  if (typeof height == \"undefined\") height = display.bounds.height;\n\n  const availTop = 0;\n\n  return getStream(sourceId)\n    .then(getVideo)\n    .then(video => {\n      const canvas = getCanvas(width, height);\n      const ctx = canvas.getContext(\"2d\");\n      drawFrame({ ctx, video, x, y, width, height, availTop });\n      return getFrameImage(canvas);\n    });\n};\n\nexport const captureVideo = ({ x, y, width, height, sourceId }) => {\n  const availTop = screen.availTop - getDisplay(sourceId).bounds.y;\n  return getStream(sourceId)\n    .then(getVideo)\n    .then(video => {\n      const canvas = getCanvas(width, height);\n      return startRecording({ canvas, video, x, y, width, height, availTop });\n    });\n};\n","\n\nconst { remote } = require(\"electron\");\n// var robot = require (\"robot-js\");\nconst ipcMain = require('electron').ipcMain;\nconst { BrowserWindow } = remote;\nconst path = require('path')\nconst url = require('url');\nconst ipc = require('electron').ipcRenderer;\n// const ipcMain = require('electron').ipcMain;\nconst { desktopCapturer } = require(\"electron\");\nimport { takeScreenshot } from \"./screencapture\";\nconsole.log(ipcMain, 'ipc');\n\nlet win;\nexports.pick = function () {\n  return new Promise((resolve, reject) => {\n\n    desktopCapturer.getSources({ types: [\"screen\"] }, (error, sources) => {\n      if (error) throw error;\n\n      takeScreenshot({\n        sourceId: sources[0].id.replace(\"screen:\", \"\")\n      }).then(result => {\n          win = new BrowserWindow({\n            transparent: true,\n            frame: false,\n            toolbar: true,\n          });\n          win.setSimpleFullScreen(true);\n          win.show();\n          win.loadURL(path.join('file://', process.cwd(), 'src/screenshot.html'));\n          win.webContents.on('did-finish-load', () => {\n            win.webContents.send('screenshot', result)\n          });\n        });\n    });\n    // win.on('closed', () => {\n    //   win = null\n    // })\n    ipc.on('clickedPixels', (event, message) => {\n      const pixels = JSON.parse(message).data;\n      console.log(pixels, 'pixels selected');\n      let rgbBox = document.getElementById('rgb-color-box');\n      let rgbValues = document.getElementById('rgb-values');\n      rgbValues.innerHTML = `rgba(${pixels[0]},${pixels[1]}, ${pixels[2]}, ${pixels[3]})`\n      rgbBox.style.display = \"inline-block\";\n      rgbBox.style.backgroundColor = `rgba(${pixels[0]},${pixels[1]}, ${pixels[2]}, ${pixels[3]})`;\n      resolve(pixels);\n    });\n\n  });\n}\n","\n  const ipc = require('electron').ipcMain;\n\n  exports.ipcMainHandler = function (win) {\n    ipc.on('clickedPixels', (event, message) => {\n      win.webContents.send('clickedPixels', JSON.stringify(message));\n    })\n  };\n\n","var {pick} = require('./pick');\nvar {ipcMainHandler} = require('./ipcMainHandler');\n\nexports.pick = pick;\nexports.ipcMainHandler = ipcMainHandler;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nconst { desktopCapturer } = require(\"electron\");\nconst { takeScreenshot } = require(\"../../src/screencapture\");\n\nimport Eyedropper from \"../../src\";\nclass Demo extends Component {\n  constructor() {\n\n    super();\n    this.state = {\n      img: \"\"\n    };\n    this.attach = this.attach.bind(this);\n  }\n\n  attach() {\n    Eyedropper.pick().then(r => console.log(r, \"resp\"))\n  }\n\n  render() {\n    console.log(\"inside main render\")\n    return (\n      <div style={{flex: 1}}>\n        <img src={this.state.img} />\n        <h1>color-eye-dropper Demo</h1>\n        <button type=\"button\" onClick={this.attach}>\n          Pick Color\n        </button>\n        <div style = {{margin: '10px'}}>\n          <div id=\"rgb-color-box\" style={{border: \"solid 1px\", padding: \"15px\", display: \"none\"}}>\n          </div>\n          <p id=\"rgb-values\"></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nrender(<Demo />, document.querySelector(\"#demo\"));\n"]}